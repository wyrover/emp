"use strict";Vue.http.headers.common["X-CSRF-TOKEN"]=document.querySelector("#token").getAttribute("value");var chart,api="http://"+window.location.host+"/api/v1/employee",pinyin_api="http://"+window.location.host+"/api/v1/pinyin",vm=new Vue({el:"#app",data:{companyData:"",officeData:"",data:[],items:{},selected_company:1,selected_job:1,selected_office:1,selected_visa:1,selected_handle:1,pinyin:"",memo:""},ready:function(){this.fetchAPI()},methods:{fetchAPI:function(){this.$http.get(api+"/create",function(e){this.$set("data",e)}).success(function(){removeLoading()})},submit:function(){this.fetchForm(),this.validate()||this.$http.post(api,this.items).success(function(e,i,t){removeLoading(),window.location.href=window.location.origin+"/employee/show/"+t.response})},fetchForm:function(){var e=$("#name").val(),i=$("#company option:selected").val(),t=$("#position option:selected").val(),a=$("#office option:selected").val(),n=$("#reached_at").val(),o=$("#passport").val(),s=$("#passport_date").val(),p=$("#passport_deadline").val(),c=$("#visa_type_id").val(),d=$("#visa_deadline").val(),l=$("#land_deadline").val(),h=$("#visa_handle_id").val(),r=$("#pinyin").val(),v=$("#memo").val();this.items={name:e,company_id:i,position_id:t,office_id:a,reached_at:n,passport:o,passport_date:s,passport_deadline:p,visa_type_id:c,visa_deadline:d,land_deadline:l,visa_handle_id:h,pinyin:r,memo:v}},validate:function(){var e=!1;return $("#form input").each(function(){""==$(this).val()?($(this).closest(".form-group").addClass("has-error"),e=!0):$(this).closest(".form-group").removeClass("has-error")}),e},touchPinyin:function(){var e={name:$("#name").val()};""==e?this.pinyin="":this.$http.post(pinyin_api,e,function(e){this.$set("pinyin",e.pinyin)})},genPinyin:function(){this.touchPinyin()}}});