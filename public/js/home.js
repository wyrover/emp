"use strict";Vue.http.headers.common["X-CSRF-TOKEN"]=document.querySelector("#token").getAttribute("value");var chart,api="http://"+window.location.host+"/api/v1/home",vm=new Vue({el:"#app",data:function(){return{chartData:{},employeeCount:"",ourEmployees:"",officeCount:"",companyCount:"",latestPassport:[],latestVisa:[],currentChart:"position",positionData:[],companyData:[],officeData:[]}},ready:function(){this.getData()},methods:{getData:function(){this.$http.get(api).success(function(t){removeLoading(),this.employeeCount=t.employeeCount,this.ourEmployees=t.ourEmployees,this.officeCount=t.officeCount,this.companyCount=t.companyCount,this.latestPassport=t.latestPassport,this.latestVisa=t.latestVisa,this.positionData=t.position,this.companyData=t.company,this.officeData=t.office,this.setChartData(t[this.currentChart])})},changeChart:function(t){var a=t+"Data";this.setChartData(this[a])},setChartData:function(t){var a=this.getItems(t,"name"),e=this.getItems(t,"counts");this.chartData={labels:a,series:e},this.drawChart()},resetCanvas:function(){$("#myChart").remove(),$("#chartBox").append('<canvas id="myChart"><canvas>')},drawChart:function(){this.resetCanvas();{var t=$("#myChart").get(0).getContext("2d"),a={labels:this.chartData.labels,datasets:[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:this.chartData.series}]};new Chart(t).Bar(a)}},getItems:function(t,a){for(var e=t,s=[],o=0;o<e.length;o++)s.push(e[o][a]);return s}}});